<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Gopi Palaniappan/apps/002-apple-catch/</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><link rel=stylesheet href=https://gopipm.github.io/hugo-theme-console/css/terminal-0.7.4.min.css><link rel=stylesheet href=https://gopipm.github.io/hugo-theme-console/css/animate-4.1.1.min.css><link rel=stylesheet href=https://gopipm.github.io/hugo-theme-console/css/console.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://gopipm.github.io/apps/002-apple-catch/"><meta name=twitter:title content><meta name=twitter:description content="<!DOCTYPE html>


    
    
    Apple Catch
    
    
    



    
        
        Apple Catch

        
        
            Score: 0
            Lives: 5
        

        
        

        
        
            
                Welcome to Apple Catch!
                Catch all the falling apples with your basket."><style>.github - corner: hover.octo - arm{animation:octocat - wave 560 ms ease - in -out}@keyframes octocat - wave{0 %,100 %{transform:rotate(0)}20 %,60 %{transform:rotate(-25 deg)}40 %,80 %{transform:rotate(10 deg)}}@media(max - width:500 px){.github - corner: hover.octo - arm{animation:none}.github - corner.octo - arm{animation:octocat - wave 560 ms ease - in -out}}</style></head><body class=terminal><a href=https://github.com/gopipm/gopipm.github.io/edit/main/apps/002-apple-catch/index.html class=github-corner aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><div class=container><div class=terminal-nav><header class=terminal-logo><div class="logo terminal-prompt"><a href=https://gopipm.github.io/ class="no-style site-name">Gopi Palaniappan</a>:~#
<a href=https://gopipm.github.io/apps>apps</a>/<a href=https://gopipm.github.io/apps/002-apple-catch>002-apple-catch</a>/</div></header><nav class=terminal-menu><ul vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://gopipm.github.io/blog/><span property="name">blog/</span></a>
<meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://gopipm.github.io/art/><span property="name">art/</span></a>
<meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://gopipm.github.io/robots/><span property="name">robots/</span></a>
<meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://gopipm.github.io/projects/><span property="name">projects/</span></a>
<meta property="position" content="4"></li></ul></nav></div></div><div class="container animated zoomIn fast"><h1></h1><!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>Apple Catch</title><script src=https://cdn.tailwindcss.com></script><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel=stylesheet><style>body{font-family:poppins,sans-serif;touch-action:none}canvas{background:linear-gradient(to bottom,#87CEEB,#98FB98);border-radius:.75rem;cursor:none}.info-box{background-color:rgba(255,255,255,.8);backdrop-filter:blur(5px)}@keyframes spin{to{transform:rotate(360deg)}}.loader{border:4px solid rgba(0,0,0,.1);border-left-color:#4ade80;border-radius:50%;width:24px;height:24px;animation:spin 1s linear infinite}</style></head><body class="bg-gray-200 flex flex-col items-center justify-center min-h-screen p-4"><div class="w-full max-w-2xl mx-auto"><h1 class="text-4xl font-bold text-center text-red-600 mb-4">Apple Catch</h1><div class="flex justify-between mb-4 text-lg font-semibold text-gray-700"><div id=score-box class="info-box p-3 rounded-lg shadow-md">Score: <span id=score>0</span></div><div id=lives-box class="info-box p-3 rounded-lg shadow-md">Lives: <span id=lives>5</span></div></div><canvas id=gameCanvas></canvas><div id=startScreen class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-20"><div class="bg-white p-8 rounded-2xl shadow-2xl text-center transform transition-all scale-100 max-w-sm w-full"><h2 class="text-3xl font-bold text-green-700 mb-4">Welcome to Apple Catch!</h2><p class="text-lg text-gray-700 mb-6">Catch all the falling apples with your basket.</p><button id=startButton class="w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300 text-xl">
Start Game</button></div></div><div id=gameOverModal class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-20"><div class="bg-white p-8 rounded-2xl shadow-2xl text-center transform transition-all scale-95 max-w-sm w-full"><h2 class="text-3xl font-bold text-gray-800 mb-4">Game Over!</h2><p class="text-xl text-gray-600 mb-2">Your final score is:</p><p id=finalScore class="text-5xl font-bold text-red-600 mb-6">0</p><div id=tipContainer class="min-h-[80px] my-6 hidden"><div id=tipLoader class="flex justify-center items-center hidden"><div class=loader></div></div><div id=tipContent class="hidden text-sm p-4 bg-green-50 rounded-lg border border-green-200"><h3 class="font-bold text-base text-green-800 mb-1">Coaching Tip:</h3><p id=tipText class=text-green-900></p></div></div><div class=space-y-3><button id=getTipBtn class="w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300 text-lg hidden">
‚ú® Get a tip
</button>
<button id=restartBtn class="w-full bg-green-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 transition duration-300 text-xl">
Play Again</button></div></div></div><div id=mysteryAppleModal class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-30"><div class="bg-white p-8 rounded-2xl shadow-2xl text-center transform transition-all scale-95 max-w-sm w-full"><h2 class="text-3xl font-bold text-purple-700 mb-4">‚ú® Mystery Apple Alert! ‚ú®</h2><div id=mysteryAppleLoader class="flex justify-center items-center h-20 hidden"><div class=loader></div></div><div id=mysteryAppleContent class=hidden><p id=mysteryAppleType class="text-xl font-semibold text-purple-600 mb-2"></p><p id=mysteryAppleDescription class="text-lg text-gray-700 mb-6"></p></div><button id=dropMysteryAppleBtn class="w-full bg-purple-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-600 focus:outline-none focus:ring-4 focus:ring-purple-300 transition duration-300 text-xl hidden">
Drop the Mystery Apple!</button></div></div></div><script>const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),scoreEl=document.getElementById("score"),livesEl=document.getElementById("lives"),startScreen=document.getElementById("startScreen"),startButton=document.getElementById("startButton"),gameOverModal=document.getElementById("gameOverModal"),finalScoreEl=document.getElementById("finalScore"),restartBtn=document.getElementById("restartBtn"),getTipBtn=document.getElementById("getTipBtn"),tipContainer=document.getElementById("tipContainer"),tipLoader=document.getElementById("tipLoader"),tipContent=document.getElementById("tipContent"),tipText=document.getElementById("tipText"),mysteryAppleModal=document.getElementById("mysteryAppleModal"),mysteryAppleLoader=document.getElementById("mysteryAppleLoader"),mysteryAppleContent=document.getElementById("mysteryAppleContent"),mysteryAppleTypeEl=document.getElementById("mysteryAppleType"),mysteryAppleDescriptionEl=document.getElementById("mysteryAppleDescription"),dropMysteryAppleBtn=document.getElementById("dropMysteryAppleBtn"),aspectRatio=4/3;let canvasWidth=Math.min(window.innerWidth,800)-32,canvasHeight=canvasWidth/aspectRatio;canvas.width=canvasWidth,canvas.height=canvasHeight;let score=0,lives=5,gameOver=!0,rightPressed=!1,leftPressed=!1;const basket={width:80,height:40,x:canvas.width/2-40,y:canvas.height-50,speed:8,emoji:"üß∫"},apples=[],appleProps={size:25,spawnInterval:1500,minSpeed:1,maxSpeed:3,defaultEmoji:"üçé"};let lastSpawnTime=0,animationFrameId,spawnTimeoutId,lastScoreForMysteryApple=0,isMysteryAppleEventActive=!1,nextSpecialAppleProperties=null;function drawBasket(){ctx.font="40px sans-serif",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(basket.emoji,basket.x+basket.width/2,basket.y+basket.height/2)}function drawApples(){apples.forEach(e=>{ctx.font=`${e.currentSize||appleProps.size}px sans-serif`,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(e.emoji||appleProps.defaultEmoji,e.x,e.y)})}function drawUI(){scoreEl.textContent=score,livesEl.textContent=lives}function spawnApple(e=!1,t={}){let s=appleProps.minSpeed+Math.random()*(appleProps.maxSpeed-appleProps.minSpeed),n=appleProps.size,o=appleProps.defaultEmoji,i=1;e&&t&&(s*=t.speedMultiplier||1,n*=t.sizeMultiplier||1,i*=t.pointsMultiplier||1,o=t.emoji||appleProps.defaultEmoji);const a=Math.random()*(canvas.width-n)+n/2;apples.push({x:a,y:-n,speed:s,currentSize:n,emoji:o,points:i})}function updateApples(){for(let t=apples.length-1;t>=0;t--){const e=apples[t];e.y+=e.speed,e.y+e.currentSize/2>basket.y&&e.y-e.currentSize/2<basket.y+basket.height&&e.x>basket.x&&e.x<basket.x+basket.width?(score+=e.points,score>0&&score%5===0&&score!==lastScoreForMysteryApple&&!isMysteryAppleEventActive&&(isMysteryAppleEventActive=!0,lastScoreForMysteryApple=score,getMysteryAppleDefinition()),apples.splice(t,1)):e.y-e.currentSize/2>canvas.height&&(lives--,apples.splice(t,1),lives<=0&&endGame())}}function updateBasketPosition(){rightPressed&&basket.x<canvas.width-basket.width?basket.x+=basket.speed:leftPressed&&basket.x>0&&(basket.x-=basket.speed)}function endGame(){gameOver=!0,finalScoreEl.textContent=score,gameOverModal.classList.remove("hidden"),gameOverModal.children[0].classList.add("scale-100"),getTipBtn.classList.remove("hidden"),animationFrameId&&cancelAnimationFrame(animationFrameId),spawnTimeoutId&&clearTimeout(spawnTimeoutId),isMysteryAppleEventActive=!1,nextSpecialAppleProperties=null}function startGame(){score=0,lives=5,apples.length=0,gameOver=!1,lastSpawnTime=0,lastScoreForMysteryApple=0,isMysteryAppleEventActive=!1,nextSpecialAppleProperties=null,startScreen.classList.add("hidden"),gameOverModal.classList.add("hidden"),mysteryAppleModal.classList.add("hidden"),gameOverModal.children[0].classList.remove("scale-100"),mysteryAppleModal.children[0].classList.remove("scale-100"),basket.x=canvas.width/2-basket.width/2,drawUI(),animationFrameId&&cancelAnimationFrame(animationFrameId),spawnTimeoutId&&clearTimeout(spawnTimeoutId),getTipBtn.classList.add("hidden"),tipContainer.classList.add("hidden"),tipContent.classList.add("hidden"),tipLoader.classList.add("hidden"),tipText.textContent="",requestAnimationFrame(gameLoop)}async function getCoachingTip(){getTipBtn.classList.add("hidden"),tipContainer.classList.remove("hidden"),tipLoader.classList.remove("hidden"),tipContent.classList.add("hidden");const e=`I just played a game called 'Apple Catch' and my final score was ${score}. Give me one short, encouraging, and specific tip (in 1-2 sentences) to help me improve my score next time. Be creative and act like a fun game coach.`,t="",n=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${t}`;try{const o={contents:[{role:"user",parts:[{text:e}]}]},s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`API call failed with status: ${s.status}`);const t=await s.json();t.candidates&&t.candidates[0]?.content?.parts[0]?.text?tipText.textContent=t.candidates[0].content.parts[0].text:(tipText.textContent="Could not get a tip this time. Just remember to keep your eyes on the apples!",console.error("Unexpected API response structure for coaching tip:",t))}catch(e){console.error("Error fetching Gemini tip:",e),tipText.textContent="There was an error getting your tip. Try focusing on the center of the screen!"}finally{tipLoader.classList.add("hidden"),tipContent.classList.remove("hidden")}}async function getMysteryAppleDefinition(){mysteryAppleModal.classList.remove("hidden"),mysteryAppleLoader.classList.remove("hidden"),mysteryAppleContent.classList.add("hidden"),dropMysteryAppleBtn.classList.add("hidden"),mysteryAppleModal.children[0].classList.add("scale-100");const e=`Generate a JSON object for a 'Mystery Apple' for an Apple Catch game. The player's current score is ${score} and they have ${lives} lives left. The JSON should include:
- 'appleType': a creative name (e.g., 'Speedy Apple', 'Tiny Gem Apple').
- 'description': a short, fun description (1-2 sentences) of this apple and what it does.
- 'speedMultiplier': a number (e.g., 1.5 for faster, 0.7 for slower).
- 'pointsMultiplier': a number (e.g., 2 for double points, 0.5 for half points).
- 'sizeMultiplier': a number (e.g., 0.7 for smaller, 1.3 for larger).
- 'emoji': an appropriate emoji for the apple (e.g., '‚ö°Ô∏è', 'üíé', 'üçí').
Make sure the multipliers are reasonable (e.g., speedMultiplier around 0.5-2, pointsMultiplier 0.5-3, sizeMultiplier 0.5-1.5). Focus on positive or challenging, but not debilitating, effects. If lives are low, maybe suggest something helpful or very challenging for a comeback.`,t="",n=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${t}`;try{const o={contents:[{role:"user",parts:[{text:e}]}],generationConfig:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{appleType:{type:"STRING"},description:{type:"STRING"},speedMultiplier:{type:"NUMBER"},pointsMultiplier:{type:"NUMBER"},sizeMultiplier:{type:"NUMBER"},emoji:{type:"STRING"}},required:["appleType","description","speedMultiplier","pointsMultiplier","sizeMultiplier","emoji"]}}},s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`API call failed with status: ${s.status}`);const t=await s.json();if(t.candidates&&t.candidates.length>0&&t.candidates[0].content&&t.candidates[0].content.parts&&t.candidates[0].content.parts.length>0){const e=t.candidates[0].content.parts[0].text;nextSpecialAppleProperties=JSON.parse(e),mysteryAppleTypeEl.textContent=nextSpecialAppleProperties.appleType,mysteryAppleDescriptionEl.textContent=nextSpecialAppleProperties.description}else console.error("Unexpected API response structure for mystery apple:",t),nextSpecialAppleProperties={appleType:"Regular Mystery Apple",description:"This apple is just a regular apple in disguise!",speedMultiplier:1,pointsMultiplier:1,sizeMultiplier:1,emoji:"‚ùì"},mysteryAppleTypeEl.textContent=nextSpecialAppleProperties.appleType,mysteryAppleDescriptionEl.textContent=nextSpecialAppleProperties.description}catch(e){console.error("Error fetching Mystery Apple definition:",e),nextSpecialAppleProperties={appleType:"Oops! Mystery Apple",description:"Something went wrong! This apple is a normal one, but full of mystery!",speedMultiplier:1,pointsMultiplier:1,sizeMultiplier:1,emoji:"‚ö†Ô∏è"},mysteryAppleTypeEl.textContent=nextSpecialAppleProperties.appleType,mysteryAppleDescriptionEl.textContent=nextSpecialAppleProperties.description}finally{mysteryAppleLoader.classList.add("hidden"),mysteryAppleContent.classList.remove("hidden"),dropMysteryAppleBtn.classList.remove("hidden")}}function gameLoop(e){if(gameOver||isMysteryAppleEventActive){gameOver||(ctx.clearRect(0,0,canvas.width,canvas.height),updateBasketPosition(),updateApples(),drawBasket(),drawApples(),drawUI()),animationFrameId=requestAnimationFrame(gameLoop);return}ctx.clearRect(0,0,canvas.width,canvas.height),e-lastSpawnTime>appleProps.spawnInterval&&(lastSpawnTime=e,spawnApple()),updateBasketPosition(),updateApples(),drawBasket(),drawApples(),drawUI(),animationFrameId=requestAnimationFrame(gameLoop)}document.addEventListener("keydown",e=>{e.key==="Right"||e.key==="ArrowRight"?rightPressed=!0:(e.key==="Left"||e.key==="ArrowLeft")&&(leftPressed=!0)}),document.addEventListener("keyup",e=>{e.key==="Right"||e.key==="ArrowRight"?rightPressed=!1:(e.key==="Left"||e.key==="ArrowLeft")&&(leftPressed=!1)});function handleMove(e){if(e.preventDefault(),!gameOver){const t=e.touches?e.touches[0].clientX:e.clientX,n=canvas.getBoundingClientRect();let s=t-n.left-basket.width/2;basket.x=Math.max(0,Math.min(s,canvas.width-basket.width))}}canvas.addEventListener("touchmove",handleMove,{passive:!1}),canvas.addEventListener("mousemove",handleMove),restartBtn.addEventListener("click",startGame),getTipBtn.addEventListener("click",getCoachingTip),startButton.addEventListener("click",startGame),dropMysteryAppleBtn.addEventListener("click",()=>{nextSpecialAppleProperties&&(mysteryAppleModal.classList.add("hidden"),mysteryAppleModal.children[0].classList.remove("scale-100"),spawnApple(!0,nextSpecialAppleProperties),nextSpecialAppleProperties=null,isMysteryAppleEventActive=!1)}),window.addEventListener("resize",()=>{canvasWidth=Math.min(window.innerWidth,800)-32,canvasHeight=canvasWidth/aspectRatio,canvas.width=canvasWidth,canvas.height=canvasHeight,basket.y=canvas.height-50,gameOver||(basket.x=canvas.width/2-basket.width/2)}),gameOver=!0,startScreen.classList.remove("hidden"),gameOverModal.classList.add("hidden"),mysteryAppleModal.classList.add("hidden")</script></body></html><div class=footer><p>&copy; Gopi Palaniappan. Powered by
<a href=https://gohugo.io/>Hugo</a>. <a href=credits/>Credits.</a><a href=/tags/>Tags.</a></p></div></div></body></html>